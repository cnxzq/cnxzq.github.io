!function t(e,a,i){function s(n,h){if(!a[n]){if(!e[n]){var m="function"==typeof require&&require;if(!h&&m)return m(n,!0);if(r)return r(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var o=a[n]={exports:{}};e[n][0].call(o.exports,(function(t){return s(e[n][1][t]||t)}),o,o.exports,t,e,a,i)}return a[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)s(i[n]);return s}({1:[function(t,e,a){"modules"in globalThis||(globalThis.modules={}),globalThis.modules["html-lexer"]=t("./index.js")},{"./index.js":2}],2:[function(t,e,a){const i=t("./lexer");i.Lexer=i,i.tokenTypes=t("./tokens"),e.exports=i},{"./lexer":3,"./tokens":4}],3:[function(t,e,a){"use strict";const i=t("./tokens"),s=new Proxy({},{get:(t,e)=>Symbol(e)}),{tagName:r,attributeName:n,attributeValueData:h,data:m,rcdata:u,rawtext:o,plaintext:c,charRefNamed:l,charRefDecimal:g,charRefHex:d,afterAttributeName:f,afterAttributeValueQuoted:b,beforeAttributeName:S,beforeAttributeValue:p,bogusComment:x,comment:v,commentEnd:T,commentEndBang:E,commentEndDash:D,commentStart:N,commentStartDash:R,content:I,charRef:V,endTagOpen:y,endTagOpenIn_:A,hexDigits:C,markupDeclarationOpen:w,markupDeclarationOpenDash:q,numericCharRef:B,selfClosingStartTag:O,lessThanSignIn_:_,tagOpen:P}=s,{startTag:L,endTag:H}=s,k=/[A-Za-z]/,U=/[A-Za-z0-9]/,z=/[0-9]/,j=/[0-9a-fA-F]/,F=/[\t\r\n\f ]/,G={style:o,script:o,xmp:o,iframe:o,noembed:o,noframes:o,textarea:u,title:u,plaintext:c},M={[h]:i.attributeValueData,[n]:i.attributeName,[f]:i.tagSpace,[b]:null,[S]:i.tagSpace,[p]:i.attributeAssign,[x]:i.commentData,[v]:i.commentData,[T]:i.commentData,[E]:i.commentData,[D]:i.commentData,[N]:null,[R]:i.commentData,[I]:null,[V]:i.bogusCharRef,[m]:i.data,[g]:i.charRefDecimal,[y]:i.endTagStart,[A]:i.endTagPrefix,[C]:i.charRefHex,[d]:i.charRefHex,[w]:i.commentStartBogus,[q]:i.commentStartBogus,[l]:i.charRefNamed,[B]:i.bogusCharRef,[O]:i.tagSpace,[c]:i.plaintext,[o]:i.rawtext,[u]:i.rcdata,[_]:i.endTagPrefix,[r]:i.tagName,[P]:i.lessThanSign};const Q=/^&([AEIOUYaeiouy]?acute|[AEIOUaeiou](?:grave|circ|uml)|y?uml|[ANOano]tilde|[Aa]ring|[Oo]slash|[Cc]?cedil|brvbar|curren|divide|frac(?:12|14|34)|iquest|middot|plusmn|(?:AE|ae|sz)lig|[lr]aquo|iexcl|micro|pound|THORN|thorn|times|COPY|copy|cent|macr|nbsp|ord[fm]|para|QUOT|quot|sect|sup[123]|AMP|amp|ETH|eth|REG|reg|deg|not|shy|yen|GT|gt|LT|lt)(;|.*)/,Y=/^&(?:copysr|centerdot|divideontimes|[gl]t(?:quest|dot|cir|cc)|[gl]trPar|gtr(?:dot|less|eqqless|eqless|approx|arr|sim)|ltr(?:i|if|ie|mes)|ltlarr|lthree|notin(?:dot|E|v[abc])?|notni(?:v[abc])?|parallel|times(?:bar|d|b));/;e.exports=class{constructor(t){this.delegate=t,this.init()}init(){this.state=m,this.returnState=m,this.tagName="#document",this.tagType=null,this.quotation=null,this.prefixCount=0,this.position={line:1,column:0},this._remains=""}write(t){let e=0,a=0;this._remains&&(t=this._remains+t,a=this._remains.length,this._remains=null),this.emit=function(i,...s){this._emit(i,t.substring(e,a),...s),e=a},this.emitInclusive=function(i,...s){this._emit(i,t.substring(e,a+1),...s),e=a+1};const i=t.length;for(;a<i;){const e=t[a];"\r"!==e&&"\n"!==e||(this.position.line++,this.position.column=0),!1!==this[this.state](e)&&(a++,this.position.column++)}e<i&&(this._remains=t.substring(e))}end(t=null){t&&this.write(t);let e=M[this.state];e&&this._emit(e,this._remains,{}),this.delegate.end(),this.init()}_emit(t,e,...a){if(t===i.charRefNamed)for(let t of function(t,e,a){if(Y.test(t))return[[i.charRefNamed,t]];var s=Q.exec(t),r=";"===t[t.length-1];if(!s)return r?[[i.charRefNamed,t]]:[[e?i.attributeValueData:"data",t]];if(";"===s[2])return[[i.charRefNamed,"&"+s[1]+";"]];return""===s[2]?e&&"="===a?[[i.attributeValueData,t]]:[[i.charRefLegacy,t]]:e?[[i.attributeValueData,t]]:[[i.charRefLegacy,"&"+s[1]],["data",s[2]]]}(e,a[0].inAttribute,a.nextChar))this.delegate.write(t);else this.delegate.write([t,e,...a])}[I](t){return this.state=this.tagType===L&&this.tagName in G?G[this.tagName]:m,!1}[m](t){"<"===t?(this.emit(i.data),this.state=P):"&"===t&&(this.emit(i.data),this.returnState=m,this.state=V)}[P](t){"!"===t?this.state=w:"/"===t?this.state=y:k.test(t)?(this.emit(i.startTagStart),this.state=r,this.tagType=L,this.tagName=t.toLowerCase()):"?"===t?(this.emitInclusive(i.commentStartBogus,{error:"invalid tag opening '<?'"}),this.state=x):(this.emit(i.lessThanSign,{error:"unescaped less-than sign"}),"<"===t||("&"===t?(this.returnState=m,this.state=V):this.state=m))}[r](t){F.test(t)?(this.emit(i.tagName),this.state=S):"/"===t?(this.emit(i.tagName),this.state=O):">"===t?(this.emit(i.tagName),this.emitInclusive(i.tagEnd),this.state=I):(this.p++,this.tagType===L&&(this.tagName=this.tagName+t.toLowerCase()))}[O](t){">"===t?(this.emitInclusive(i.tagEndAutoclose),this.state=m):F.test(t)||"/"===t||(this.emit(i.tagSpace),this.state=n)}[y](t){k.test(t)?(this.emit(i.endTagStart),this.state=r,this.tagType=H,this.tagName=""):">"===t?(this.emit(i.commentStartBogus,{error:"invalid comment"}),this.emitInclusive(i.commentEndBogus),this.state=m):(this.emit(i.commentStartBogus,{error:"invalid comment (may be a malformed end tag)"}),this.state=x)}[S](t){F.test(t)||("/"===t?(this.emit(i.tagSpace),this.state=O):">"===t?(this.emit(i.tagSpace),this.emitInclusive(i.tagEnd),this.state=I):(this.emit(i.tagSpace),this.state=n))}[n](t){F.test(t)?(this.emit(i.attributeName),this.state=f):"/"===t?(this.emit(i.attributeName),this.state=O):"="===t?(this.emit(i.attributeName),this.state=p):">"===t&&(this.emit(i.attributeName),this.emitInclusive(i.tagEnd),this.state=I)}[f](t){F.test(t)||("/"===t?(this.emit(i.tagSpace),this.state=O):"="===t?this.state=p:">"===t?(this.emit(i.tagSpace),this.emitInclusive(i.tagEnd),this.state=I):(this.emit(i.tagSpace),this.state=n))}[p](t){F.test(t)||('"'===t||"'"===t?(this.emit(i.attributeAssign),this.state=h,this.quotation=t,this.emitInclusive(i.attributeValueStart)):">"===t?(this.emit(i.attributeAssign),this.emit(i.attributeValueStart),this.emit(i.attributeValueData,{error:"missing attribute value"}),this.emit(i.attributeValueEnd),this.emitInclusive(i.tagEnd),this.state=I):"&"===t?(this.emit(i.attributeAssign),this.emit(i.attributeValueStart),this.quotation="",this.returnState=h,this.state=V):(this.emit(i.attributeAssign),this.emit(i.attributeValueStart),this.state=h,this.quotation="","<"!==t&&"="!==t&&"`"!==t||this.emit(i.attributeValueData,{error:"attribute values must not start with a ("+t+") character"})))}[h](t){"&"===t?(this.emit(i.attributeValueData),this.returnState=h,this.state=V):t===this.quotation?(this.emit(i.attributeValueData),this.emitInclusive(i.attributeValueEnd),this.state=b):""===this.quotation&&F.test(t)?(this.emit(i.attributeValueData),this.emit(i.attributeValueEnd),this.state=S):""===this.quotation&&">"===t&&(this.emit(i.attributeValueData),this.emit(i.attributeValueEnd),this.emitInclusive(i.tagEnd),this.state=I)}[b](t){F.test(t)?this.state=S:"/"===t?this.state=O:">"===t?(this.emitInclusive(i.tagEnd),this.state=I):(this.emit(i.tagSpace,{error:"missing space after attribute"}),this.state=n)}[w](t){"-"===t?this.state=q:">"===t?(this.emit(i.commentStartBogus,{error:"invalid comment"}),this.emitInclusive(i.commentEndBogus),this.state=m):(this.emit(i.commentStartBogus,{error:"invalid comment (may be an unhandled markup declaration)"}),this.state=x)}[q](t){"-"===t?(this.emitInclusive(i.commentStart),this.state=N):(this.emit(i.commentStartBogus,{error:"invalid comment (comments should start with \x3c!--)"}),this.state=x)}[N](t){"-"===t?this.state=R:">"===t?(this.emitInclusive(i.commentEnd),this.state=m):this.state=v}[R](t){"-"===t?this.state=T:">"===t?(this.emitInclusive(i.commentEnd),this.state=m):this.state=v}[v](t){"-"===t&&(this.emit(i.commentData),this.state=D)}[D](t){this.state="-"===t?T:v}[T](t){">"===t?(this.emitInclusive(i.commentEnd),this.state=m):"!"===t?this.state=E:(this.emit(i.commentData,{error:"comment data should not contain --"}),this.state=v)}[E](t){"-"===t?(this.emit(i.commentData,{error:"comment data should not contain --!"}),this.state=D):">"===t?(this.emitInclusive(i.commentEnd,{error:"comment should end with --\x3e"}),this.state=m):(this.emit(i.commentData,{error:"comment data should not contain --!"}),this.state=v)}[x](t){">"===t&&(this.emit(i.commentData),this.emitInclusive(i.commentEndBogus),this.state=m)}[c](t){}[o](t){"<"===t&&(this.emit(i.rawtext),this.returnState=o,this.state=_)}[u](t){"<"===t?(this.emit(i.rcdata),this.returnState=u,this.state=_):"&"===t&&(this.emit(i.rcdata),this.returnState=u,this.state=V)}[_](t){"/"===t?(this.state=A,this.tagType=H,this.prefixCount=0):(this.emit(i.endTagPrefix),this.state=this.returnState)}[A](t){this.prefixCount<this.tagName.length?t.toLowerCase()===this.tagName[this.prefixCount]?this.prefixCount++:(this.emit(i.endTagPrefix),this.state=this.returnState):F.test(t)?(this.emit(i.endTagStart),this.state=S):"/"===t?(this.emit(i.endTagStart),this.state=O):">"===t?(this.emit(i.endTagStart),this.emitInclusive(i.tagEnd),this.state=m):(this.emit(i.endTagPrefix),this.state=this.returnState)}[V](t){if("#"===t)this.state=B;else{if(!U.test(t))return this.emit(i.bogusCharRef),this.state=this.returnState,!1;this.state=l}}[B](t){if("x"===t||"X"===t)this.state=d;else{if(!z.test(t))return this.emit(i.bogusCharRef),this.state=this.returnState,!1;this.state=g}}[g](t){if(z.test(t));else{if(";"!==t)return this.emit(i.charRefDecimal,{error:"unterminated decimal character reference"}),this.state=this.returnState,!1;this.emitInclusive(i.charRefDecimal),this.state=this.returnState}}[d](t){if(!j.test(t))return this.emit(i.bogusCharRef),this.state=this.returnState,!1;this.state=C}[C](t){if(j.test(t));else{if(";"!==t)return this.emit(i.charRefHex,{error:"unterminated hexadecimal character reference"}),this.state=this.returnState,!1;this.emitInclusive(i.charRefHex),this.state=this.returnState}}[l](t){if(U.test(t));else{if(";"!==t)return this.emit(i.charRefNamed,{inAttribute:this.returnState===h,nextChar:t}),this.state=this.returnState,!1;this.emitInclusive(i.charRefNamed,{inAttribute:this.returnState===h}),this.state=this.returnState}}}},{"./tokens":4}],4:[function(t,e,a){new Proxy({},{get:(t,e)=>Symbol(e)}),console.log.bind(console);e.exports={attributeAssign:"attributeAssign",attributeName:"attributeName",attributeValueData:"attributeValueData",attributeValueEnd:"attributeValueEnd",attributeValueStart:"attributeValueStart",bogusCharRef:"bogusCharRef",charRefDecimal:"charRefDecimal",charRefHex:"charRefHex",charRefLegacy:"charRefLegacy",charRefNamed:"charRefNamed",commentData:"commentData",commentEnd:"commentEnd",commentEndBogus:"commentEndBogus",commentStart:"commentStart",commentStartBogus:"commentStartBogus",data:"data",endTagPrefix:"endTagPrefix",endTagStart:"endTagStart",lessThanSign:"lessThanSign",plaintext:"plaintext",rawtext:"rawtext",rcdata:"rcdata",tagSpace:"space",startTagStart:"startTagStart",tagEnd:"tagEnd",tagEndAutoclose:"tagEndAutoclose",tagName:"tagName"}},{}]},{},[1]);
