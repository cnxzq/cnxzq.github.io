<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>monaco</title>
	<link rel="stylesheet" href="../../css/layout.less">
	<style>
		html,body,#app{
			height: 100%;
			overflow: hidden;
			margin: 0;
			position: relative;
		}
	</style>
</head>
<body>
	<div id="app">
		<div id="editor" style="width: 100%; height:100%; position: absolute;"></div>
	</div>
	
	<script>var require = { paths: { 'vs': 'https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.21.2/min/vs' } };</script>
	<script src="https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.21.2/min/vs/loader.min.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.21.2/min/vs/editor/editor.main.nls.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/monaco-editor/0.21.2/min/vs/editor/editor.main.js"></script>
    
    <script>
        var editor = null;
        window.onload=function(){
			require(['vs/editor/editor.main'], function () {
				editor = updateEditor("html",defaultCode)
			});
        }
        window.onresize=function(){
			editor && editor.layout();
        }
		function dispose(){
			if (editor) {
				if (editor.getModel()) {
					editor.getModel().dispose();
				}
				editor.dispose();
				editor = null;
			}
		}
		function updateEditor(lang,code){
			if (!editor) {
				var ele = document.getElementById("editor");
				ele.innerHTML="";
				editor = monaco.editor.create(ele, {
					model: null,
				});
			}
			var oldModel = editor.getModel();
			var newModel = monaco.editor.createModel(code, lang);
			editor.setModel(newModel);
			if (oldModel) { oldModel.dispose(); }
			return editor;
		}


var defaultCode = `<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
.txt{background:#f004}
</style>
</head>
<body>
标题：<input id="txt" class="txt" value="test" />
<input type="button" onclick="showmsg()" value="显示">
<script>
function showmsg(){
	alert("msg:"+document.getElementById("txt").value);
}
\<\/script\>
</body>
</html>`
    </script>
</body>
</html>